---
title: Configuration
description: Complete guide to configuring Nuxt Contentstack with all available options, environment settings, and best practices.
navigation:
  icon: i-lucide-settings
---

Learn how to configure Nuxt Contentstack for your specific needs. This guide covers all available options, from basic setup to advanced configurations for live preview, personalization, and multi-region deployments.

## Basic Configuration

The minimal configuration requires three essential settings:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-contentstack'],
  
  'nuxt-contentstack': {
    apiKey: 'your_api_key',           // Required
    deliveryToken: 'your_token',      // Required  
    environment: 'production'         // Required
  }
})
```

## Core Settings

### Required Settings

| Option | Type | Description |
|--------|------|-------------|
| `apiKey` | `string` | Your Contentstack stack API key (starts with 'blt') |
| `deliveryToken` | `string` | Your delivery token (starts with 'cs') |
| `environment` | `string` | Target environment ('production' or 'preview') |

### Optional Core Settings

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `region` | `string` | `'us'` | Contentstack region |
| `branch` | `string` | `'main'` | Content branch |
| `locale` | `string` | `'en-us'` | Default locale |
| `debug` | `boolean` | `false` | Enable debug logging |

## Regions

Contentstack supports multiple regions. Configure the correct region for your stack:

```ts [nuxt.config.ts]
'nuxt-contentstack': {
  // ... other config
  region: 'us'        // or 'eu', 'au', 'azure-na', 'azure-eu', 'gcp-na', 'gcp-eu'
}
```

### Available Regions

| Region | Code | Description |
|--------|------|-------------|
| North America | `us` | Default US region |
| Europe | `eu` | European region |
| Australia | `au` | Australia/Asia-Pacific |
| Azure North America | `azure-na` | Azure US region |
| Azure Europe | `azure-eu` | Azure EU region |
| GCP North America | `gcp-na` | Google Cloud US |
| GCP Europe | `gcp-eu` | Google Cloud EU |

## Live Preview Configuration

Enable real-time content editing with comprehensive live preview settings:

```ts [nuxt.config.ts]
'nuxt-contentstack': {
  // ... core config
  livePreview: {
    enable: true,
    previewToken: 'your_preview_token',    // Required if enabled
    editableTags: true,                    // Add visual editing tags
    editButton: true,                      // Enable edit button
    mode: 'builder',                       // 'builder' or 'preview'
    ssr: false                            // Server-side rendering for live preview
  }
}
```

### Advanced Edit Button Configuration

Customize the edit button appearance and behavior:

```ts [nuxt.config.ts]
'nuxt-contentstack': {
  // ... core config
  livePreview: {
    enable: true,
    previewToken: 'your_preview_token',
    editButton: {
      enable: true,
      position: 'top-right',               // Button position
      exclude: ['insideLivePreviewPortal'], // Where to hide button
      includeByQueryParameter: false       // Show only with ?edit=true
    }
  }
}
```

### Edit Button Positions

| Position | Description |
|----------|-------------|
| `top` | Top center |
| `bottom` | Bottom center |
| `left` | Left center |
| `right` | Right center |
| `top-left` | Top left corner |
| `top-right` | Top right corner |
| `top-center` | Top center |
| `bottom-left` | Bottom left corner |
| `bottom-right` | Bottom right corner |
| `bottom-center` | Bottom center |

### Live Preview Modes

| Mode | Description | Use Case |
|------|-------------|----------|
| `builder` | Visual Builder mode | Content creation and editing |
| `preview` | Preview mode only | Content review and approval |

## Personalization Configuration

Enable Contentstack Personalize for dynamic, personalized content:

```ts [nuxt.config.ts]
'nuxt-contentstack': {
  // ... core config
  personalization: {
    enable: true,
    projectUid: 'your_project_uid'        // Required if enabled
  }
}
```

::callout{icon="i-lucide-users"}
**Personalization Project UID**: Find this in your Contentstack Personalize dashboard under project settings.
::

## Route-based Content Fetching (Auto-fetch)

Configure automatic content fetching based on URL patterns for zero-boilerplate content loading:

```ts [nuxt.config.ts]
'nuxt-contentstack': {
  // ... core config
  autoFetch: {
    enabled: true,                        // Enable auto-fetch middleware
    
    // Routes to include (optional - if empty, all routes are processed)
    include: [
      '/',                               // Homepage
      '/about',                          // Specific routes
      '/blog/*',                         // Wildcard patterns
      '/products/**',                    // Deep wildcard patterns
    ],
    
    // Routes to exclude
    exclude: ['/admin/**', '/api/**', '/_nuxt/**'],
    
    // Map routes to content types
    contentTypeMapping: {
      '/': 'page',                       // Homepage uses 'page' content type
      '/blog/*': 'article',              // Blog routes use 'article' content type
      '/products/*': 'product',          // Product routes use 'product' content type
      default: 'page',                   // Fallback content type
    },
    
    // Additional options
    options: {
      locale: 'en-us',
      includeReferences: ['author', 'category'], // References to include
      includeFallback: true,
      cacheKey: 'auto-fetch',
      errorHandling: 'silent',           // 'silent' | 'throw' | 'log'
    },
  }
}
```

### Auto-fetch Configuration Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `enabled` | `boolean` | `false` | Enable or disable auto-fetch middleware |
| `include` | `string[]` | `[]` | Route patterns to include (empty = all routes) |
| `exclude` | `string[]` | `['/admin/**', '/api/**', '/_nuxt/**']` | Route patterns to exclude |
| `contentTypeMapping` | `object` | `{ default: 'page' }` | Map routes to content types |
| `options` | `object` | See below | Additional fetch options |

### Auto-fetch Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `locale` | `string` | `'en-us'` | Content locale |
| `includeReferences` | `string[]` | `[]` | Reference fields to include |
| `includeFallback` | `boolean` | `true` | Include fallback content |
| `cacheKey` | `string` | `'auto-fetch'` | Cache key prefix |
| `errorHandling` | `'silent' \| 'log' \| 'throw'` | `'silent'` | Error handling mode |

::callout{icon="i-lucide-zap"}
**Learn More**: Read the complete [Route-based Content Fetching guide](/features/auto-fetch) for detailed setup and usage examples.
::

## Environment Variables

Secure your configuration using environment variables:

### .env File Setup

```bash [.env]
# Core settings
NUXT_CONTENTSTACK_API_KEY=your_api_key
NUXT_CONTENTSTACK_DELIVERY_TOKEN=your_delivery_token
NUXT_CONTENTSTACK_ENVIRONMENT=production

# Optional settings
NUXT_CONTENTSTACK_REGION=eu
NUXT_CONTENTSTACK_BRANCH=main
NUXT_CONTENTSTACK_LOCALE=en-us

# Live Preview
NUXT_CONTENTSTACK_LIVE_PREVIEW_ENABLE=true
NUXT_CONTENTSTACK_LIVE_PREVIEW_TOKEN=your_preview_token

# Personalization
NUXT_CONTENTSTACK_PERSONALIZATION_ENABLE=true
NUXT_CONTENTSTACK_PERSONALIZATION_PROJECT_UID=your_project_uid
```

### Configuration with Environment Variables

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-contentstack'],
  
  'nuxt-contentstack': {
    apiKey: process.env.NUXT_CONTENTSTACK_API_KEY,
    deliveryToken: process.env.NUXT_CONTENTSTACK_DELIVERY_TOKEN,
    environment: process.env.NUXT_CONTENTSTACK_ENVIRONMENT,
    region: process.env.NUXT_CONTENTSTACK_REGION || 'us',
    
    livePreview: {
      enable: process.env.NUXT_CONTENTSTACK_LIVE_PREVIEW_ENABLE === 'true',
      previewToken: process.env.NUXT_CONTENTSTACK_LIVE_PREVIEW_TOKEN,
    },
    
    personalization: {
      enable: process.env.NUXT_CONTENTSTACK_PERSONALIZATION_ENABLE === 'true',
      projectUid: process.env.NUXT_CONTENTSTACK_PERSONALIZATION_PROJECT_UID,
    }
  }
})
```

## Complete Configuration Example

Here's a full configuration example with all available options:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-contentstack', '@nuxt/image'],
  
  'nuxt-contentstack': {
    // Required core settings
    apiKey: process.env.NUXT_CONTENTSTACK_API_KEY,
    deliveryToken: process.env.NUXT_CONTENTSTACK_DELIVERY_TOKEN,
    environment: process.env.NUXT_CONTENTSTACK_ENVIRONMENT,
    
    // Optional core settings
    region: 'us',
    branch: 'main',
    locale: 'en-us',
    
    // Live Preview configuration
    livePreview: {
      enable: true,
      previewToken: process.env.NUXT_CONTENTSTACK_PREVIEW_TOKEN,
      editableTags: true,
      editButton: {
        enable: true,
        position: 'top-right',
        exclude: ['insideLivePreviewPortal'],
        includeByQueryParameter: false
      },
      mode: 'builder',
      ssr: false
    },
    
    // Personalization configuration
    personalization: {
      enable: true,
      projectUid: process.env.NUXT_CONTENTSTACK_PROJECT_UID
    },
    
    // Route-based content fetching
    autoFetch: {
      enabled: true,
      include: [
        '/',
        '/about',
        '/blog/*',
        '/products/**',
      ],
      exclude: ['/admin/**', '/api/**', '/_nuxt/**'],
      contentTypeMapping: {
        '/': 'page',
        '/blog/*': 'article',
        '/products/*': 'product',
        default: 'page',
      },
      options: {
        locale: 'en-us',
        includeReferences: ['author', 'category'],
        includeFallback: true,
        cacheKey: 'auto-fetch',
        errorHandling: 'silent',
      },
    },
    
    // Development and debugging
    debug: process.env.NODE_ENV === 'development'
  },
  
  // Optional: Configure @nuxt/image integration
  image: {
    provider: 'contentstack'
  },
  
  // Optional: Enable DevTools
  devtools: { enabled: true }
})
```

## Multi-Environment Setup

Configure different settings for different environments:

```ts [nuxt.config.ts]
const isDev = process.env.NODE_ENV === 'development'
const isPreview = process.env.NUXT_CONTENTSTACK_ENVIRONMENT === 'preview'

export default defineNuxtConfig({
  modules: ['nuxt-contentstack'],
  
  'nuxt-contentstack': {
    apiKey: process.env.NUXT_CONTENTSTACK_API_KEY,
    deliveryToken: process.env.NUXT_CONTENTSTACK_DELIVERY_TOKEN,
    environment: process.env.NUXT_CONTENTSTACK_ENVIRONMENT,
    
    // Enable live preview only in development or preview environment
    livePreview: {
      enable: isDev || isPreview,
      previewToken: process.env.NUXT_CONTENTSTACK_PREVIEW_TOKEN,
      editableTags: isDev || isPreview,
      editButton: isDev || isPreview
    },
    
    // Enable debug mode only in development
    debug: isDev
  }
})
```

## Debug Mode

Enable debug mode to troubleshoot configuration issues:

```ts [nuxt.config.ts]
'nuxt-contentstack': {
  // ... other config
  debug: true
}
```

Debug mode outputs:
- Complete configuration object
- SDK initialization details
- API request and response logs
- Cache operation details


## Next Steps

Now that you have Nuxt Contentstack properly configured:

::div{class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6"}
  ::card
  ---
  title: "Components & Blocks"
  icon: "i-lucide-layers"
  to: "/essentials/components"
  ---
  Learn about ContentstackModularBlocks and building dynamic layouts.
  ::
::

::div{class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"}
  ::card
  ---
  title: "Route-based Auto-fetch"
  icon: "i-lucide-zap"
  to: "/features/auto-fetch"
  ---
  Set up zero-config content fetching based on URL patterns.
  ::

  ::card
  ---
  title: "Image Optimization"
  icon: "i-lucide-image"
  to: "/essentials/image-optimization"
  ---
  Optimize images with Contentstack's Image Delivery API integration.
  ::
::
